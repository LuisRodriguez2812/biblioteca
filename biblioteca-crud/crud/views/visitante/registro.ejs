<!DOCTYPE html>
<html lang="es">
<head>
    <title>Registro de Usuario</title>
    <link rel="stylesheet" href="/css/bootstrap-5.0.2-dist/css/bootstrap.min.css">
    <script src="https://use.fontawesome.com/releases/v6.3.0/js/all.js" crossorigin="anonymous"></script>
</head>
<body class="bg-light">
    <!-- Navbar de la Biblioteca -->
    <nav class="navbar navbar-expand-lg navbar-light bg-light">
     <div class="container">
       <a class="navbar-brand" href="/">Biblioteca</a>
       <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
         <span class="navbar-toggler-icon"></span>
       </button>
       <div class="collapse navbar-collapse" id="navbarNav">
         <ul class="navbar-nav">
           <li class="nav-item">
           </li>
         </ul>
       </div>
     </div>
   </nav>

  <div class="container mt-5">
    <h2 class="mb-4">Registro de Usuario</h2>

    <% if (error) { %>
      <div class="alert alert-danger"><%= error %></div>
    <% } %>

    <form id="registroForm" method="POST" action="/visitante/registro" novalidate>
      <div class="mb-3">
        <label for="nombre" class="form-label">Nombre</label>
        <input type="text" class="form-control" name="nombre" id="nombre" required>
      </div>

      <div class="mb-3">
        <label for="apellido" class="form-label">Apellido</label>
        <input type="text" class="form-control" name="apellido" id="apellido" required>
      </div>

      <div class="mb-3">
        <label for="telefono" class="form-label">Teléfono</label>
        <input type="text" class="form-control" name="telefono" id="telefono" required>
      </div>

      <div class="mb-3">
        <label for="direccion" class="form-label">Dirección</label>
        <input type="text" class="form-control" name="direccion" id="direccion" required>
      </div>

      <div class="mb-3">
        <label for="email" class="form-label">Correo Electrónico</label>
        <input type="email" class="form-control" name="email" id="email" required>
      </div>

      <div class="mb-3">
        <label for="contrasena" class="form-label">Contraseña</label> <!-- Cambié 'password' por 'contrasena' -->
        <input type="password" class="form-control" name="contrasena" id="contrasena" required> <!-- Cambié 'password' por 'contrasena' -->
      </div>
      
      <button type="submit" class="btn btn-primary">Registrarse</button>
    </form>

    <p class="mt-3">¿Ya tienes cuenta? <a href="/visitante/login">Inicia sesión aquí</a></p>
  </div>

  <script>
    document.getElementById('registroForm').addEventListener('submit', function (event) {
      const nombre = document.getElementById('nombre').value.trim();
      const apellido = document.getElementById('apellido').value.trim();
      const telefono = document.getElementById('telefono').value.trim();
      const direccion = document.getElementById('direccion').value.trim();
      const email = document.getElementById('email').value.trim();

      if (!nombre || !apellido || !telefono || !direccion || !email) {
        alert('Por favor, completa todos los campos.');
        event.preventDefault();
        return;
      }

      if (!/^\d+$/.test(telefono)) {
        alert('El teléfono debe contener solo números.');
        event.preventDefault();
        return;
      }

      const emailRegex = /^[^@\s]+@[^@\s]+\.[^@\s]+$/;
      if (!emailRegex.test(email)) {
        alert('Ingresa un correo válido.');
        event.preventDefault();
      }
    });
  </script>
</body>
<%- include('../partials/footer') %>

</html>
